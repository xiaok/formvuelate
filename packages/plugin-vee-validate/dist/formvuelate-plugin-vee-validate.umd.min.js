!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("vue"),require("vee-validate"),require("formvuelate")):"function"==typeof define&&define.amd?define(["vue","vee-validate","formvuelate"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).FormvuelatePluginVeeValidate=t(e.Vue,e.VeeValidate,e.formvuelate)}(this,(function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){return{validation:e}}var u="vee-validate-fvl-form-context";var c=new Map;function l(n){var i=n.component;if(c.has(i))return c.get(i);var o=e.markRaw({name:"withFieldWrapper",props:{label:{type:String,default:void 0},modelValue:{type:null,default:void 0},validations:{type:[String,Object,Function],default:void 0},_veeValidateConfig:{type:Object,required:!0}},setup:function(o,u){var c=u.attrs,l=o._veeValidateConfig,s=l.path,d=l.mapProps,f=e.toRefs(o),v=f.validations,m=f.modelValue,p=m?m.value:void 0,h=s?"".concat(s,".").concat(c.model):c.model,b=e.computed((function(){return o.label})),y=t.useField(h,v,{initialValue:p,label:b}),g=y.value,O=y.errorMessage,j=y.meta,S=y.setTouched,P=y.errors,C=y.validate,w=y.handleChange;m&&e.watch(m,(function(e){g.value=e}));var V=e.inject(r.constants.INJECTED_LOCAL_COMPONENTS,{}),T=function(t,r){if(r&&"string"==typeof t&&t in r)return r[t];return e.resolveDynamicComponent(t)}(i,V);return function(){return e.h(T,a(a(a({},o),c),d({errorMessage:e.unref(O),errors:e.unref(P),meta:j,setTouched:S,validate:C,handleChange:w},n)))}}});return c.set(i,o),o}return function(n){var i=n&&n.mapProps||o;return r.definePlugin({setup:function(r,n){var o=r.parsedSchema,c=r.formBinds,s=(e.getCurrentInstance()||{attrs:{}}).attrs,d=e.inject(u,void 0);d||(d=t.useForm({validationSchema:n.validationSchema?e.computed((function(){return n.validationSchema})):void 0,initialErrors:s["initial-errors"]||s.initialErrors,initialTouched:s["initial-touched"]||s.initialTouched}),e.provide(u,d));var f=d.handleSubmit;function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e.schema){t=t?"".concat(t,".").concat(e.model):e.model;var r=Array.isArray(e.schema)?e.schema:Object.keys(e.schema).map((function(t){return a({model:t},e.schema[t])}));return a(a({},e),{},{schema:r.map((function(e){return v(e,t)}))})}var n=function(e){return a(a({},e),{},{_veeValidateConfig:{mapProps:i,path:t},component:l(e)})};return Array.isArray(e)?e.map(n):n(e)}var m=e.computed((function(){return e=o.value,t=v,e.map((function(e){return e.map((function(e){return t(e)}))}));var e,t})),p=c.value.onSubmit,h=f((function(e,t){var r=t.evt;p(r)}));return a(a({},r),{},{formBinds:e.computed((function(){return a(a({},r.formBinds.value),{},{onSubmit:h})})),slotBinds:e.computed((function(){return a(a({},r.slotBinds.value),{},{validation:{errors:d.errors.value,values:d.values,isSubmitting:d.isSubmitting.value,submitCount:d.submitCount.value,meta:d.meta.value}})})),parsedSchema:m})},extend:function(e){(0,e.extendSchemaFormProps)({validationSchema:{type:Object,default:void 0}})}})}}));